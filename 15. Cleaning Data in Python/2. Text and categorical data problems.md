# ==> Membership constraints
## --> finding inconsistent categories
```py
inconsistent_categories = set(study_data['blood_type']).difference(study_data['blood_type'])
print(inconsistent_categories)
# {'Z+'}

# Get rows w/ inconsistent values
inconsistent_rows = study_data['blood_Type'].isin(inconsistent_categories)
study_data['inconsistent_rows']
```
        birthday   blood_type   name
     5  2019-12-17 Z+           jennifer 
# Members only
- Membership Constraint

      A month column with the value 14.
      A day_of_week column with the value Suntermonday .
      A has_loan column with the value 12.
      A GPA column containing a z- grade.
- Other Constraint

      An age column with values above 130.
      A birthdate column with values in the future.
      A revenue column represented as a string.
# Finding consistency
- Print the categories DataFrame and take a close look at all possible correct categories of the survey columns.
- Print the unique values of the survey columns in airlines using the .unique() method.
```py
# Print categories DataFrame
print(categories)

# Print unique values of survey columns in airlines
print('Cleanliness: ', airlines['cleanliness'].unique(), "\n")
print('Safety: ', airlines['safety'].unique(), "\n")
print('Satisfaction: ', airlines['satisfaction'].unique(), "\n")
```
Question
> Take a look at the output. Out of the cleanliness, safety and satisfaction columns, which one has an inconsistent category and what is it?
- Possible Answers
- [x] cleanliness because it has an Unacceptable category.
- [ ] cleanliness because it has a Terribly dirty category.
- [ ] satisfaction because it has a Very satisfied category.
- [ ] safety because it has a Neutral category.
---
- Create a set out of the cleanliness column in airlines using set() and find the inconsistent category by finding the difference in the cleanliness column of categories.
- Find rows of airlines with a cleanliness value not in categories and print the output
```py
# Find the cleanliness category in airlines not in categories
cat_clean = set(airlines['cleanliness']).difference(categories['cleanliness']) # cleanliness in arilines not in categories

# Find rows with that category
cat_clean_rows = airlines['cleanliness'].isin(cat_clean)

# Print rows with inconsistent category
print(airlines[cat_clean_rows])
```
- Print the rows with the consistent categories of cleanliness only.
```py
# Find the cleanliness category in airlines not in categories
cat_clean = set(airlines['cleanliness']).difference(categories['cleanliness'])

# Find rows with that category
cat_clean_rows = airlines['cleanliness'].isin(cat_clean)

# Print rows with inconsistent category
print(airlines[cat_clean_rows])

# Print rows with consistent categories only
print(airlines[~cat_clean_rows])
```
# ==> Categorical variables
## --> value consistency upper lower
- to clean this for counting `.upper`, `.lower`
<img src="https://user-images.githubusercontent.com/51888893/210425515-f0a0849b-a0d1-4ba9-8780-e6e5c8052979.png" width400px>
```py
# Capitalize
marriage_status['marriage_status'] = marriage_status['marriage_status'].str.upper()
marriage_status['marriage_status'].value_counts()

# Lowercase
marriage_status['marriage_status'] = marriage_status['marriage_status'].str.lower()
marriage_status['marriage_status'].value_counts()
```
## --> values consistency triling spaces
```py
# Strip all spaces
demographics = demographics['marriage_status'].str.strip()
demographics['marriage_status'].value_counts()
```
## --> collapsing data into categories
- `cut()` : can specify range w/ bins
```py
# cut() , category ranges and names
ranges = [0, 200000, 500000, np.inf]
group_names = ['0-200k', '200k-500k', '500k+']
# create income group col
demographics['income_groupd'] = pd.cut(demographics['household_income'], bins=ranges, labels=group_names)
demographics[['income_group', 'household_income']]

# create mapping dict and replace
mapping = {'Microsoft':'DesktopOS', 'MacOs':'DesktopOS', 'Linux':'DesktopOS', 'IOS':'MobileOS', 'Android': 'MobileOS'}
devices['operating_system'] = devices['operating_system'].replace(mapping)
device['operating_system'].unique()
```
# Categories of errors
- White spaces and inconsistency

        .str.strip()
        .str.lower()
        .str.upper()
- Creating or remapping categories

        .pandas.cut()
        .replace()
        .pandas.qcut()
